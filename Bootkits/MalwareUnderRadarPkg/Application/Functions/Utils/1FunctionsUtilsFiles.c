#include <Uefi.h>
#include <Library/UefiBootServicesTableLib.h>
#include <Library/UefiLib.h>



EFI_STATUS
EFIAPI
FunctionsUtilsFiles_SaveContentToFile(
    IN      CHAR16      *FileName,
    IN      UINT8       *Content,
    IN      UINTN       ContentSize
)
{
    EFI_STATUS Status;
    EFI_SIMPLE_FILE_SYSTEM_PROTOCOL *SimpleFileSystem;
    EFI_FILE_PROTOCOL *Root;
    EFI_FILE_PROTOCOL *File;


    Status = gBS->LocateProtocol(
        &gEfiSimpleFileSystemProtocolGuid,
        NULL,
        (VOID **)&SimpleFileSystem
    );


    Status = SimpleFileSystem->OpenVolume(
        SimpleFileSystem,
        &Root
    );


    Status = Root->Open(
        Root,
        &File,
        FileName,
        EFI_FILE_MODE_CREATE | EFI_FILE_MODE_READ | EFI_FILE_MODE_WRITE,
        0
    );


    Status = File->Write(
        File,
        &ContentSize,
        Content
    );


    File->Close(
        File
    );


    Root->Close(
        Root
    );


    return EFI_SUCCESS;
}
